<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PixelWizard - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—ñ–∫—Å–µ–ª—å–Ω–æ—ó —â—ñ–ª—å–Ω–æ—Å—Ç—ñ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="miniapps-common.css">
</head>
<body>
    <a href="../index.html" class="back-button">‚Üê –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –º–µ–Ω—é</a>
    <div class="header">
        <i class="bi bi-magic header-icon"></i>
        <h1>PixelWizard</h1>
        <p>–ê–Ω–∞–ª—ñ–∑ –ø—ñ–∫—Å–µ–ª—å–Ω–æ—ó —â—ñ–ª—å–Ω–æ—Å—Ç—ñ —Ç–∞ –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π –≤—ñ–¥–µ–æ—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è</p>
    </div>

    <div class="main-content">
        <form id="pixelWizardForm" autocomplete="off">
            <label class="form-label"><i class="info-icon bi bi-grid-3x3"></i>–†–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å (MP):</label>
            <select class="form-input" id="megapixels"></select>
            
            <label class="form-label"><i class="info-icon bi bi-arrows-angle"></i>–ö—É—Ç –æ–≥–ª—è–¥—É (¬∞):</label>
            <input type="number" class="form-input" id="fovDegrees" min="1" max="360" step="0.1" value="90" required>
            
            <label class="form-label"><i class="info-icon bi bi-rulers"></i>–í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ –æ–±'—î–∫—Ç–∞ (–º):</label>
            <input type="number" class="form-input" id="distance" min="0.1" step="0.1" value="10" required>
            
            <button type="submit" class="calc-button"><i class="bi bi-calculator"></i> –†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏</button>
        </form>
        
        <div id="resultBox" class="result-box" style="display:none;">
            <div id="resultContent"></div>
        </div>

        <div class="tips-section">
            <p><i class="bi bi-info-circle"></i> <strong>–©–æ —Ç–∞–∫–µ DORI?</strong></p>
            <p>DORI - —Ü–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –≤—ñ–¥–µ–æ—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è:</p>
            <ul>
                <li><strong>D</strong>etection (–î–µ—Ç–µ–∫—Ü—ñ—è) - –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏—è–≤–∏—Ç–∏, —â–æ –≤ –∫–∞–¥—Ä—ñ —î –ª—é–¥–∏–Ω–∞</li>
                <li><strong>O</strong>bservation (–û–≥–ª—è–¥) - —Ä–æ–∑—Ä—ñ–∑–Ω–µ–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π –æ–¥—è–≥—É —Ç–∞ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç–µ–π</li>
                <li><strong>R</strong>ecognition (–†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è) - –≤–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∑–Ω–∞–π–æ–º–æ—ó –ª—é–¥–∏–Ω–∏</li>
                <li><strong>I</strong>dentification (–Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è) - —á—ñ—Ç–∫–∞ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è –æ—Å–æ–±–∏</li>
            </ul>
            
            <p><i class="bi bi-gear"></i> <strong>–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:</strong></p>
            <ul>
                <li>–†–æ–∑—Ä–∞—Ö–æ–≤–∞–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è —î —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–º–∏ —ñ –º–æ–∂—É—Ç—å –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –≤ —Ä–µ–∞–ª—å–Ω–∏—Ö —É–º–æ–≤–∞—Ö</li>
                <li>–ù–∞ —è–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–ø–ª–∏–≤–∞—é—Ç—å: –æ—Å–≤—ñ—Ç–ª–µ–Ω—ñ—Å—Ç—å, –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ñ —É–º–æ–≤–∏, —è–∫—ñ—Å—Ç—å –æ–ø—Ç–∏–∫–∏</li>
                <li>–ü—ñ–∫—Å–µ–ª—å–Ω–∞ —â—ñ–ª—å–Ω—ñ—Å—Ç—å (px/–º) –ø–æ–∫–∞–∑—É—î, —Å–∫—ñ–ª—å–∫–∏ –ø—ñ–∫—Å–µ–ª—ñ–≤ –ø—Ä–∏–ø–∞–¥–∞—î –Ω–∞ 1 –º–µ—Ç—Ä –æ–±'—î–∫—Ç–∞</li>
                <li>–ß–∏–º –≤–∏—â–∞ –ø—ñ–∫—Å–µ–ª—å–Ω–∞ —â—ñ–ª—å–Ω—ñ—Å—Ç—å, —Ç–∏–º –±—ñ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π –º–æ–∂–Ω–∞ —Ä–æ–∑—Ä—ñ–∑–Ω–∏—Ç–∏</li>
            </ul>
            
            <p><i class="bi bi-lightbulb"></i> <strong>–ü–æ—Ä–∞–¥–∏:</strong></p>
            <ul>
                <li>–î–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –æ–±–ª–∏—á—á—è –ø–æ—Ç—Ä—ñ–±–Ω–æ –º—ñ–Ω—ñ–º—É–º 125 px/–º (—Ä—ñ–≤–µ–Ω—å Recognition)</li>
                <li>–î–ª—è —á–∏—Ç–∞–Ω–Ω—è –Ω–æ–º–µ—Ä–Ω–∏—Ö –∑–Ω–∞–∫—ñ–≤ –∞–≤—Ç–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –º—ñ–Ω—ñ–º—É–º 150 px/–º</li>
                <li>–î–ª—è —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∫—É–ø—é—Ä –ø–æ—Ç—Ä—ñ–±–Ω–æ –º—ñ–Ω—ñ–º—É–º 300 px/–º</li>
                <li>–ü—Ä–∏ –∑–º–µ–Ω—à–µ–Ω–Ω—ñ –∫—É—Ç–∞ –æ–≥–ª—è–¥—É (FOV) –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è –ø—ñ–∫—Å–µ–ª—å–Ω–∞ —â—ñ–ª—å–Ω—ñ—Å—Ç—å –Ω–∞ —Ç—ñ–π —Å–∞–º—ñ–π –≤—ñ–¥—Å—Ç–∞–Ω—ñ</li>
            </ul>
        </div>
    </div>
    <script src="visionrange.js"></script>
    <script>
        // –î–∏–Ω–∞–º—ñ—á–Ω–µ –Ω–∞–ø–æ–≤–Ω–µ–Ω–Ω—è select#megapixels —ñ–∑ RESOLUTION_MAP
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof RESOLUTION_MAP !== 'undefined') {
                const select = document.getElementById('megapixels');
                Object.entries(RESOLUTION_MAP).forEach(([mp, px]) => {
                    const opt = document.createElement('option');
                    opt.value = mp;
                    opt.textContent = `${mp} MP (${px})`;
                    if (mp === "2") opt.selected = true;
                    select.appendChild(opt);
                });
            }
            
            // –û–±—Ä–æ–±–Ω–∏–∫ —Ñ–æ—Ä–º–∏
            document.getElementById('pixelWizardForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å –∑ —Ñ–æ—Ä–º–∏
                const megapixels = parseFloat(document.getElementById('megapixels').value);
                const fovDegrees = parseFloat(document.getElementById('fovDegrees').value);
                const distance = parseFloat(document.getElementById('distance').value);
                
                // –†–æ–∑—Ä–∞—Ö—É–Ω–∫–∏
                const width_px = RESOLUTION_MAP[megapixels.toString()];
                const width_m = 2 * distance * Math.tan((fovDegrees / 2) * (Math.PI / 180));
                const px_per_m = width_px / width_m;
                
                // –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ä—ñ–≤–Ω—è DORI
                let dori_level, dori_desc;
                if (px_per_m >= 250) {
                    dori_level = "üÜî IDENTIFY (—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è)";
                    dori_desc = "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –æ—Å–æ–±—É";
                } else if (px_per_m >= 125) {
                    dori_level = "üë§ RECOGNIZE (—Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è)";
                    dori_desc = "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ä–æ–∑–ø—ñ–∑–Ω–∞—Ç–∏ –æ—Å–æ–±—É";
                } else if (px_per_m >= 62) {
                    dori_level = "üëÄ OBSERVE (—Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è)";
                    dori_desc = "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç–∏ –æ–±'—î–∫—Ç";
                } else if (px_per_m >= 25) {
                    dori_level = "üîç DETECT (–≤–∏—è–≤–ª–µ–Ω–Ω—è)";
                    dori_desc = "–ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏—è–≤–∏—Ç–∏ —Ä—É—Ö/–æ–±'—î–∫—Ç";
                } else {
                    dori_level = "‚ö†Ô∏è –ù–∏–∂—á–µ DETECT";
                    dori_desc = "–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –≤–∏—è–≤–ª–µ–Ω–Ω—è";
                }
                
                // –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
                const extra_features = [];
                if (px_per_m >= 300) {
                    extra_features.push("ü™ô <strong>–†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –∫—É–ø—é—Ä</strong> (300+ px/–º)");
                } else if (px_per_m >= 150) {
                    extra_features.push("ü™ô –ß–∞—Å—Ç–∫–æ–≤–µ —Ä–æ–∑—Ä—ñ–∑–Ω–µ–Ω–Ω—è –Ω–æ–º—ñ–Ω–∞–ª—ñ–≤");
                }
                
                if (px_per_m >= 150) {
                    extra_features.push("üöó <strong>–ß–∏—Ç–∞–Ω–Ω—è –Ω–æ–º–µ—Ä—ñ–≤ –∞–≤—Ç–æ</strong> (150+ px/–º)");
                } else if (px_per_m >= 90) {
                    extra_features.push("üöó –í–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä—ñ–≤ (—á–∞—Å—Ç–∫–æ–≤–µ)");
                }
                
                // –§–æ—Ä–º—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                let resultHTML = `
                    <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –æ–±—Ä–∞—Ö—É–Ω–∫—É:</h3>
                    <p><strong>üìê –ü–∞—Ä–∞–º–µ—Ç—Ä–∏:</strong></p>
                    <ul>
                        <li>–†–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å: ${megapixels} MP</li>
                        <li>–ö—É—Ç –æ–≥–ª—è–¥—É: ${fovDegrees}¬∞</li>
                        <li>–í—ñ–¥—Å—Ç–∞–Ω—å –¥–æ –æ–±'—î–∫—Ç–∞: ${distance} –º</li>
                        <li>–®–∏—Ä–∏–Ω–∞ –∑–æ–Ω–∏: ${width_m.toFixed(1)} –º</li>
                    </ul>
                    <p><strong>üìà –ü—ñ–∫—Å–µ–ª—å–Ω–∞ —â—ñ–ª—å–Ω—ñ—Å—Ç—å:</strong> ${px_per_m.toFixed(1)} px/–º</p>
                    <p><strong>–°—Ç–∞–Ω–¥–∞—Ä—Ç DORI:</strong> ${dori_level}</p>
                    <p><strong>–¢–µ—Ö–Ω—ñ—á–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:</strong> ${dori_desc}</p>
                `;
                
                if (extra_features.length > 0) {
                    resultHTML += `
                        <p><strong>üîç –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:</strong></p>
                        <ul>
                            ${extra_features.map(feature => `<li>${feature}</li>`).join('')}
                        </ul>
                    `;
                }
                
                // –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
                document.getElementById('resultContent').innerHTML = resultHTML;
                document.getElementById('resultBox').style.display = 'block';
            });
        });
    </script>
</body>
</html>
